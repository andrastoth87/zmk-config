/*
 * Copyright (c) 2020 The ZMK Contributors
 *
 * SPDX-License-Identifier: MIT
 *
 *
 ***************************************************************************************************
 * Base layer: 0
 ***************************************************************************************************
 *  +--------+--------+--------+--------+--------+--------+             +--------+--------+--------+--------+--------+--------+
 *  |  Tab   |  q  Q  |  w  W  |  e  E  |  r  R  |  t  T  |             |  z  Z  |  u  U  |  i  I  |  o  O  |  p  P  |  BckS  |
 *  +--------+--------+--------+--------+--------+--------+             +--------+--------+--------+--------+--------+--------+
 *  |  Ctrl  |  a  A  |  s  S  |  d  D  |  f  F  |  g  G  |             |  h  H  |  j J   |  k K   |  l L   |  Lay 1 |  Rpt   |
 *  +--------+--------+--------+--------+--------+--------+             +--------+--------+--------+--------+--------+--------+
 *  |  Shift |  y  Y  |  x  X  |  c  C  |  v  V  |  b  B  |             |  n  N  |  m  M  | . , ? !| ( [ {  |_ = ' " |  Esc   |
 *  +--------+--------+--------+----+---+----+---+----+---+----+   +----+---+----+---+----+---+----+--------+--------+--------+
 *                                  | R Alt  | Lay 0  | Space  |   | Enter  |  Lay 2 |   Win  |
 *                                  +--------+--------+--------+   +--------+--------+--------+
 *  Shift  - hold Caps Lock
 *  x  - hold Ctrl + x
 *  c  - hold Ctrl + c
 *  v  - hold Ctrl + v
 *  Esc  - hold Alt + F4
 *
 ***************************************************************************************************
 * Accent layer: 1
 ***************************************************************************************************
 *  +--------+--------+--------+--------+--------+--------+             +--------+--------+--------+--------+--------+--------+
 *  | Tab    |        |        |  é  É  |        |        |             |  ú  Ú  |  ü  Ü  |  í  Í  |  ö  Ö  |  ő  Ő  |  BckS  |
 *  +--------+--------+--------+--------+--------+--------+             +--------+--------+--------+--------+--------+--------+
 *  | Ctrl   |  á  Á  |        |        |        |        |             |        |  ű  Ű  |        |  ó  Ó  |        |  Rpt   |
 *  +--------+--------+--------+--------+--------+--------+             +--------+--------+--------+--------+--------+--------+
 *  |   1*   |        |        |        |        |        |             |        |        |        |        |        |  Esc   |
 *  +--------+--------+--------+----+---+----+---+----+---+----+   +----+---+----+---+----+---+----+--------+--------+--------+
 *                                  | R Alt  | Lay 0  | Space  |   | Enter  |  Lay 2 |   Win  |
 *                                  +--------+--------+--------+   +--------+--------+--------+
 *  Shift  - hold Caps Lock
 *  Esc  - hold Alt + F4
 *
 *
 ***************************************************************************************************
 * Media/numpad layer: 2
 ***************************************************************************************************
 *  +--------+--------+--------+--------+--------+--------+             +--------+--------+--------+--------+--------+--------+
 *  | Tab    |  BrUp  |  Prev  |  Play  |  Next  |  VUp   |             |   -    |   +    |   7    |   8    |   9    |  BckS  |
 *  +--------+--------+--------+--------+--------+--------+             +--------+--------+--------+--------+--------+--------+
 *  | Ctrl   | BrDown |  PDown |   Up   |   PUp  | VDown  |             |   /    |   *    |   4    |   5    |   6    |  Rpt   |
 *  +--------+--------+--------+--------+--------+--------+             +--------+--------+--------+--------+--------+--------+
 *  | Shift  |Home/End|  Left  |  Down  | Right  |  Mute  |             |   .    |   0    |   1    |   2    |   3    |  Esc   |
 *  +--------+--------+--------+----+---+----+---+----+---+----+   +----+---+----+---+----+---+----+--------+--------+--------+
 *                                  | R Alt  | Lay 0  | Space  |   | Enter  |  Lay 3 |   Win  |
 *                                  +--------+--------+--------+   +--------+--------+--------+
 *  Esc  - hold Alt + F4
 *
 ***************************************************************************************************
 * Miscellaneous layer: 3
 ***************************************************************************************************
 *  +--------+--------+--------+--------+--------+--------+             +--------+--------+--------+--------+--------+--------+
 *  | Tab    |   F1   |   F2   |   F3   |   F4   |  F5    |             |   F6   |   F7   |   F8   |   F9   |   F10  |  BckS  |
 *  +--------+--------+--------+--------+--------+--------+             +--------+--------+--------+--------+--------+--------+
 *  | Ctrl   |        |        |        |        | PrtSrc |             |  < > % |  @ & # | / \ |  |   F11  |   F12  |  Rpt   |
 *  +--------+--------+--------+--------+--------+--------+             +--------+--------+--------+--------+--------+--------+
 *  | Shift  |        |        |        |        |        |             |        |        |  : ;   | ) ] }  |        |  Esc   |
 *  +--------+--------+--------+----+---+----+---+----+---+----+   +----+---+----+---+----+---+----+--------+--------+--------+
 *                                  | R Alt  | Lay 0  | Space  |   | Enter  |  Lay 2 |   Win  |
 *                                  +--------+--------+--------+   +--------+--------+--------+
 *  Esc  - hold Alt + F4
 *
 */


#include <behaviors.dtsi>
#include <dt-bindings/zmk/keys.h>
#include <dt-bindings/zmk/bt.h>
#include "keys_hu.h"

#define xxx &none
#define ___ &trans

#define HME 0  // Home
#define ACC 1  // Accent
#define MEDNUM  2  // Media and numpad
#define MSC  3  // Miscellaneous

/ {
    behaviors {
        sctd: shift_caps_lock_tap_dance {
            compatible = "zmk,behavior-tap-dance";
            label = "SHIFT_CAPS_LOCK_TOGGLE";
            #binding-cells = <0>;
            tapping-term-ms = <200>;
            bindings = <&sk LSHFT>, <&caps_word>;
        };

         hmesym1: tap_dance_home_symbols_1 {
            compatible = "zmk,behavior-tap-dance";
            label = "TAP_DANCE_HOME_SYMBOLS_1";
            #binding-cells = <0>;
            tapping-term-ms = <300>;
            bindings = <&kp HU_DOT>, <&kp HU_COMMA>, <&kp HU_QMARK>, <&kp HU_EXCL>;
        };

        hmesym2: tap_dance_home_symbols2 {
            compatible = "zmk,behavior-tap-dance";
            label = "TAP_DANCE_HOME_SYMBOLS_2";
            #binding-cells = <0>;
            tapping-term-ms = <300>;
            bindings = <&kp HU_LPAR>, <&kp HU_LBKT>, <&kp HU_LBRC>;
        };

        hmesym3: tap_dance_home_symbols_3 {
            compatible = "zmk,behavior-tap-dance";
            label = "TAP_DANCE_HOME_SYMBOLS_3";
            #binding-cells = <0>;
            tapping-term-ms = <300>;
            bindings = <&kp HU_UNDER>, <&kp HU_EQUAL>, <&kp HU_SQT>, <&kp HU_DOUBLE_QUOTES>;
        };

        mednumhe: tap_dance_home_end {
            compatible = "zmk,behavior-tap-dance";
            label = "TAP_DANCE_HOME_END";
            #binding-cells = <0>;
            tapping-term-ms = <300>;
            bindings = <&kp HOME>, <&kp END>;
        };

        capi: capital_i_acute {
            compatible = "zmk,behavior-mod-morph";
            label = "CAPITAL_I_ACUTE_MOD";
            #binding-cells = <0>;
            bindings = <&kp HU_I_ACUTE>, <&kp HU_I_ACUTE_CAP>;
            mods = <(MOD_LSFT)>;
        };

        bspcdl: backspace_delete {
            compatible = "zmk,behavior-mod-morph";
            label = "BACKSPACE_DELETE";
            #binding-cells = <0>;
            bindings = <&kp BSPC>, <&kp DEL>;
            mods = <(MOD_LSFT)>;
        };

        mscsym1: tap_dance_miscellaneous_symbols_1 {
            compatible = "zmk,behavior-tap-dance";
            label = "TAP_DANCE_MISCELLANEOUS_SYMBOLS_1";
            #binding-cells = <0>;
            tapping-term-ms = <300>;
            bindings = <&kp HU_LT>, <&kp HU_GT>, <&kp HU_PRCNT>;
        };

        mscsym2: tap_dance_miscellaneous_symbols_2 {
            compatible = "zmk,behavior-tap-dance";
            label = "TAP_DANCE_MISCELLANEOUS_SYMBOLS_2";
            #binding-cells = <0>;
            tapping-term-ms = <300>;
            bindings = <&kp HU_AT>, <&kp HU_AMPS>, <&kp HU_HASH>;
        };

        mscsym3: tap_dance_miscellaneous_symbols_3 {
            compatible = "zmk,behavior-tap-dance";
            label = "TAP_DANCE_MISCELLANEOUS_SYMBOLS_3";
            #binding-cells = <0>;
            tapping-term-ms = <300>;
            bindings = <&kp HU_FSLH>, <&kp HU_BSLH>, <&kp HU_PIPE>;
        };

        mscsym4: tap_dance_miscellaneous_symbols_4 {
            compatible = "zmk,behavior-tap-dance";
            label = "TAP_DANCE_MISCELLANEOUS_SYMBOLS_4";
            #binding-cells = <0>;
            tapping-term-ms = <300>;
            bindings = <&kp HU_COLON>, <&kp HU_SEMI>;
        };

        mscsym5: tap_dance_miscellaneous_symbols_5 {
            compatible = "zmk,behavior-tap-dance";
            label = "TAP_DANCE_MISCELLANEOUS_SYMBOLS_5";
            #binding-cells = <0>;
            tapping-term-ms = <300>;
            bindings = <&kp HU_RPAR>, <&kp HU_RBKT>, <&kp HU_RBRC>;
        };

    };
        keymap {
                compatible = "zmk,keymap";

                home_layer {
                        bindings = <
   &kp TAB    &kp Q  &kp W        &kp E        &kp R        &kp T           &mt LC(HU_Z) HU_Z  &kp U       &kp I     &kp O     &kp P     &bspcdl
   &sctd  &kp A  &kp S        &kp D        &kp F        &kp G           &kp H        &kp J       &kp K     &kp L     &to ACC   &key_repeat
   &sk LCTRL      &kp HU_Y  &mt LC(X) X  &mt LC(C) C  &mt LC(V) V  &kp B           &kp N        &kp M       &hmesym1  &hmesym2  &hmesym3  &mt LA(F4) ESC
                                  &kp RALT     &to HME      &kp SPACE       &kp RET      &to MEDNUM  &kp RGUI
                        >;
                };

                accent_layer {
                        bindings = <
   ___  ___             ___  &kp HU_E_ACUTE  ___      ___          &kp  HU_U_ACUTE  &kp HU_U_UMLAUT        &capi  &kp HU_O_UMLAUT  &kp HU_O_DOUBLE_ACUTE  ___
   ___  &kp HU_A_ACUTE  ___  ___             ___      ___          ___              &kp HU_U_DOUBLE_ACUTE  ___    &kp HU_O_ACUTE   ___                    ___
   ___  ___             ___  ___             ___      ___          ___              ___                    ___    ___              ___                    ___
                             ___             ___      ___          ___              &to MEDNUM             ___
                        >;
                };

                media_numpad_layer {
                        bindings = <
   ___  &kp C_BRI_UP  &kp C_PREV  &kp C_PP  &kp C_NEXT  &kp C_VOL_UP          &kp KP_SUBTRACT  &kp KP_PLUS      &kp HU_N7  &kp HU_N8  &kp HU_N9  ___
   ___  &kp C_BRI_DN  &kp PG_DN   &kp UP    &kp PG_UP   &kp C_VOL_DN          &kp KP_DIVIDE    &kp KP_MULTIPLY  &kp HU_N4  &kp HU_N5  &kp HU_N6  ___
   ___  &mednumhe     &kp LEFT    &kp DOWN  &kp RIGHT   &kp C_MUTE            &kp KP_DOT       &kp HU_N0        &kp HU_N1  &kp HU_N2  &kp HU_N3  ___
                                  ___       ___         ___                   ___              &to MSC          ___
                        >;
                };

                miscellaneous_layer {
                        bindings = <
   ___  &kp F1  &kp F2  &kp F3  &kp F4  &kp F5             &kp F6    &kp F7      &kp F8    &kp F9    &kp F10  ___
   ___  xxx     xxx     xxx     xxx     &kp PSCRN          &mscsym1  &mscsym2    &mscsym3  &kp F11   &kp F12  ___
   ___  xxx     xxx     xxx     xxx     xxx                xxx       xxx         &mscsym4  &mscsym5  xxx      ___
                        ___     ___     ___                ___       &to MEDNUM  ___
                        >;
                };
            };
   };
